<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/nav_main"
    app:startDestination="@id/homeFragment">

    <!-- Home -->
    <fragment
        android:id="@+id/homeFragment"
        android:name="com.safeguard.sos.presentation.home.HomeFragment"
        android:label="Home"
        tools:layout="@layout/fragment_home">

        <action
            android:id="@+id/action_home_to_sos"
            app:destination="@id/sosFragment" />

        <action
            android:id="@+id/action_home_to_contacts"
            app:destination="@id/contactsFragment" />

        <action
            android:id="@+id/action_home_to_helperDashboard"
            app:destination="@id/helperDashboardFragment" />
    </fragment>

    <!-- SOS -->
    <fragment
        android:id="@+id/sosFragment"
        android:name="com.safeguard.sos.presentation.sos.SOSFragment"
        android:label="SOS"
        tools:layout="@layout/fragment_sos">

        <action
            android:id="@+id/action_sos_to_countdown"
            app:destination="@id/sosCountdownFragment" />

        <action
            android:id="@+id/action_sos_to_active"
            app:destination="@id/sosActiveFragment" />

        <action
            android:id="@+id/action_sos_to_history"
            app:destination="@id/sosHistoryFragment" />
    </fragment>

    <fragment
        android:id="@+id/sosCountdownFragment"
        android:name="com.safeguard.sos.presentation.sos.SOSCountdownFragment"
        android:label="SOS Countdown"
        tools:layout="@layout/fragment_sos_countdown">

        <argument
            android:name="emergencyType"
            app:argType="string"
            android:defaultValue="General" />

        <action
            android:id="@+id/action_countdown_to_active"
            app:destination="@id/sosActiveFragment"
            app:popUpTo="@id/sosFragment"
            app:popUpToInclusive="false" />
    </fragment>

    <fragment
        android:id="@+id/sosActiveFragment"
        android:name="com.safeguard.sos.presentation.sos.SOSActiveFragment"
        android:label="Active SOS"
        tools:layout="@layout/fragment_sos_active">

        <argument
            android:name="sosId"
            app:argType="string" />

        <action
            android:id="@+id/action_active_to_tracking"
            app:destination="@id/trackingMapFragment" />
    </fragment>

    <fragment
        android:id="@+id/sosHistoryFragment"
        android:name="com.safeguard.sos.presentation.sos.SOSHistoryFragment"
        android:label="SOS History"
        tools:layout="@layout/fragment_sos_history">

        <action
            android:id="@+id/action_history_to_detail"
            app:destination="@id/sosDetailFragment" />
    </fragment>

    <fragment
        android:id="@+id/sosDetailFragment"
        android:name="com.safeguard.sos.presentation.sos.SOSDetailFragment"
        android:label="SOS Detail"
        tools:layout="@layout/fragment_sos_detail">

        <argument
            android:name="sosId"
            app:argType="string" />
    </fragment>

    <!-- Contacts -->
    <fragment
        android:id="@+id/contactsFragment"
        android:name="com.safeguard.sos.presentation.contacts.ContactsFragment"
        android:label="Contacts"
        tools:layout="@layout/fragment_contacts">

        <action
            android:id="@+id/action_contacts_to_addContact"
            app:destination="@id/addContactFragment" />

        <action
            android:id="@+id/action_contacts_to_editContact"
            app:destination="@id/editContactFragment" />
    </fragment>

    <fragment
        android:id="@+id/addContactFragment"
        android:name="com.safeguard.sos.presentation.contacts.AddContactFragment"
        android:label="Add Contact"
        tools:layout="@layout/fragment_add_contact" />

    <fragment
        android:id="@+id/editContactFragment"
        android:name="com.safeguard.sos.presentation.contacts.EditContactFragment"
        android:label="Edit Contact"
        tools:layout="@layout/fragment_edit_contact">

        <argument
            android:name="contactId"
            app:argType="string" />
    </fragment>

    <!-- Helper -->
    <fragment
        android:id="@+id/helperDashboardFragment"
        android:name="com.safeguard.sos.presentation.helper.HelperDashboardFragment"
        android:label="Helper Dashboard"
        tools:layout="@layout/fragment_helper_dashboard">

        <action
            android:id="@+id/action_helperDashboard_to_nearbyAlerts"
            app:destination="@id/nearbyAlertsFragment" />

        <action
            android:id="@+id/action_helperDashboard_to_helperHistory"
            app:destination="@id/helperHistoryFragment" />
    </fragment>

    <fragment
        android:id="@+id/nearbyAlertsFragment"
        android:name="com.safeguard.sos.presentation.helper.NearbyAlertsFragment"
        android:label="Nearby Alerts"
        tools:layout="@layout/fragment_nearby_alerts">

        <action
            android:id="@+id/action_nearbyAlerts_to_alertDetail"
            app:destination="@id/alertDetailFragment" />
    </fragment>

    <fragment
        android:id="@+id/alertDetailFragment"
        android:name="com.safeguard.sos.presentation.helper.AlertDetailFragment"
        android:label="Alert Detail"
        tools:layout="@layout/fragment_alert_detail">

        <argument
            android:name="sosId"
            app:argType="string" />

        <action
            android:id="@+id/action_alertDetail_to_navigation"
            app:destination="@id/navigationFragment" />
    </fragment>

    <fragment
        android:id="@+id/navigationFragment"
        android:name="com.safeguard.sos.presentation.helper.NavigationFragment"
        android:label="Navigation"
        tools:layout="@layout/fragment_navigation">

        <argument
            android:name="sosId"
            app:argType="string" />

        <argument
            android:name="destinationLat"
            app:argType="float" />

        <argument
            android:name="destinationLng"
            app:argType="float" />
    </fragment>

    <fragment
        android:id="@+id/helperHistoryFragment"
        android:name="com.safeguard.sos.presentation.helper.HelperHistoryFragment"
        android:label="Help History"
        tools:layout="@layout/fragment_helper_history" />

    <!-- Map -->
    <fragment
        android:id="@+id/mapFragment"
        android:name="com.safeguard.sos.presentation.map.MapFragment"
        android:label="Map"
        tools:layout="@layout/fragment_map" />

    <fragment
        android:id="@+id/trackingMapFragment"
        android:name="com.safeguard.sos.presentation.map.TrackingMapFragment"
        android:label="Tracking"
        tools:layout="@layout/fragment_tracking_map">

        <argument
            android:name="sosId"
            app:argType="string" />
    </fragment>

    <!-- Profile -->
    <fragment
        android:id="@+id/profileFragment"
        android:name="com.safeguard.sos.presentation.profile.ProfileFragment"
        android:label="Profile"
        tools:layout="@layout/fragment_profile">

        <action
            android:id="@+id/action_profile_to_editProfile"
            app:destination="@id/editProfileFragment" />

        <action
            android:id="@+id/action_profile_to_medicalInfo"
            app:destination="@id/medicalInfoFragment" />

        <action
            android:id="@+id/action_profile_to_settings"
            app:destination="@id/settingsFragment" />

        <action
            android:id="@+id/action_profile_to_contacts"
            app:destination="@id/contactsFragment" />

        <action
            android:id="@+id/action_profile_to_sosHistory"
            app:destination="@id/sosHistoryFragment" />

        <action
            android:id="@+id/action_profile_to_helperDashboard"
            app:destination="@id/helperDashboardFragment" />

        <action
            android:id="@+id/action_profile_to_verification"
            app:destination="@id/verificationGraph" />
    </fragment>

    <fragment
        android:id="@+id/editProfileFragment"
        android:name="com.safeguard.sos.presentation.profile.EditProfileFragment"
        android:label="Edit Profile"
        tools:layout="@layout/fragment_edit_profile" />

    <fragment
        android:id="@+id/medicalInfoFragment"
        android:name="com.safeguard.sos.presentation.profile.MedicalInfoFragment"
        android:label="Medical Info"
        tools:layout="@layout/fragment_medical_info" />

    <!-- Settings -->
    <fragment
        android:id="@+id/settingsFragment"
        android:name="com.safeguard.sos.presentation.settings.SettingsFragment"
        android:label="Settings"
        tools:layout="@layout/fragment_settings">

        <action
            android:id="@+id/action_settings_to_about"
            app:destination="@id/aboutFragment" />
    </fragment>

    <fragment
        android:id="@+id/aboutFragment"
        android:name="com.safeguard.sos.presentation.settings.AboutFragment"
        android:label="About"
        tools:layout="@layout/fragment_about">

        <action
            android:id="@+id/action_about_to_licenses"
            app:destination="@id/licensesFragment" />
    </fragment>

    <fragment
        android:id="@+id/licensesFragment"
        android:name="com.safeguard.sos.presentation.settings.LicensesFragment"
        android:label="Open Source Licenses" />

    <!-- Nested Verification Graph -->
    <!-- <include app:graph="@navigation/nav_auth" /> -->
    <include app:graph="@navigation/nav_verification" />

</navigation>